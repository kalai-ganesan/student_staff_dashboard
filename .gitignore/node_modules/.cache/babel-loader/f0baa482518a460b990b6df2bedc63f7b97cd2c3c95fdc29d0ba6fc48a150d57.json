{"ast":null,"code":"import React,{useEffect,useState}from'react';import{PieChart,Pie,Cell,Tooltip,BarChart,Bar,XAxis,YAxis,Legend}from'recharts';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND=process.env.REACT_APP_BACKEND||'http://127.0.0.1:8000/api';export default function Dashboard(){const[students,setStudents]=useState([]);const[staff,setStaff]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{Promise.all([fetch(\"\".concat(BACKEND,\"/students/\")).then(r=>r.json()).catch(()=>[]),fetch(\"\".concat(BACKEND,\"/staff/\")).then(r=>r.json()).catch(()=>[])]).then(_ref=>{let[sdata,stf]=_ref;setStudents(sdata||[]);setStaff(stf||[]);setLoading(false);});},[]);if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading data...\"});// Prepare data for charts\nconst attendanceData=students.map(s=>({name:s.name,value:s.attendance}));const marksData=students.map(s=>({name:s.name,marks:s.marks}));const staffWork=staff.map(s=>({name:s.name,hours:s.workload_hours}));const COLORS=['#0088FE','#00C49F','#FFBB28','#FF8042','#A28BFE'];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Attendance (per student)\"}),attendanceData.length?/*#__PURE__*/_jsxs(PieChart,{width:500,height:300,children:[/*#__PURE__*/_jsx(Pie,{data:attendanceData,dataKey:\"value\",nameKey:\"name\",cx:\"50%\",cy:\"50%\",outerRadius:100,label:true,children:attendanceData.map((entry,index)=>/*#__PURE__*/_jsx(Cell,{fill:COLORS[index%COLORS.length]},\"c-\".concat(index)))}),/*#__PURE__*/_jsx(Tooltip,{})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No student attendance data\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Marks (bar)\"}),marksData.length?/*#__PURE__*/_jsxs(BarChart,{width:700,height:300,data:marksData,children:[/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"marks\"})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No marks data\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Staff Workload\"}),staffWork.length?/*#__PURE__*/_jsxs(BarChart,{width:700,height:300,data:staffWork,children:[/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"hours\"})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No staff data\"})]});}","map":{"version":3,"names":["React","useEffect","useState","PieChart","Pie","Cell","Tooltip","BarChart","Bar","XAxis","YAxis","Legend","jsx","_jsx","jsxs","_jsxs","BACKEND","process","env","REACT_APP_BACKEND","Dashboard","students","setStudents","staff","setStaff","loading","setLoading","Promise","all","fetch","concat","then","r","json","catch","_ref","sdata","stf","children","attendanceData","map","s","name","value","attendance","marksData","marks","staffWork","hours","workload_hours","COLORS","length","width","height","data","dataKey","nameKey","cx","cy","outerRadius","label","entry","index","fill"],"sources":["C:/student_staff_dashboard/frontend/src/components/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { PieChart, Pie, Cell, Tooltip, BarChart, Bar, XAxis, YAxis, Legend } from 'recharts';\n\nconst BACKEND = process.env.REACT_APP_BACKEND || 'http://127.0.0.1:8000/api';\n\nexport default function Dashboard(){\n  const [students, setStudents] = useState([]);\n  const [staff, setStaff] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    Promise.all([\n      fetch(`${BACKEND}/students/`).then(r=>r.json()).catch(()=>[]),\n      fetch(`${BACKEND}/staff/`).then(r=>r.json()).catch(()=>[]),\n    ]).then(([sdata, stf])=>{\n      setStudents(sdata || []);\n      setStaff(stf || []);\n      setLoading(false);\n    });\n  }, []);\n\n  if(loading) return <p>Loading data...</p>;\n\n  // Prepare data for charts\n  const attendanceData = students.map(s => ({ name: s.name, value: s.attendance }));\n  const marksData = students.map(s => ({ name: s.name, marks: s.marks }));\n  const staffWork = staff.map(s => ({ name: s.name, hours: s.workload_hours }));\n\n  const COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#A28BFE'];\n\n  return (\n    <div>\n      <h2>Attendance (per student)</h2>\n      {attendanceData.length ? (\n        <PieChart width={500} height={300}>\n          <Pie data={attendanceData} dataKey=\"value\" nameKey=\"name\" cx=\"50%\" cy=\"50%\" outerRadius={100} label>\n            {attendanceData.map((entry, index) => <Cell key={`c-${index}`} fill={COLORS[index % COLORS.length]} />)}\n          </Pie>\n          <Tooltip />\n        </PieChart>\n      ) : <p>No student attendance data</p>}\n\n      <h2>Marks (bar)</h2>\n      {marksData.length ? (\n        <BarChart width={700} height={300} data={marksData}>\n          <XAxis dataKey=\"name\" />\n          <YAxis />\n          <Tooltip />\n          <Legend />\n          <Bar dataKey=\"marks\" />\n        </BarChart>\n      ) : <p>No marks data</p>}\n\n      <h2>Staff Workload</h2>\n      {staffWork.length ? (\n        <BarChart width={700} height={300} data={staffWork}>\n          <XAxis dataKey=\"name\" />\n          <YAxis />\n          <Tooltip />\n          <Legend />\n          <Bar dataKey=\"hours\" />\n        </BarChart>\n      ) : <p>No staff data</p>}\n    </div>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,QAAQ,CAAEC,GAAG,CAAEC,IAAI,CAAEC,OAAO,CAAEC,QAAQ,CAAEC,GAAG,CAAEC,KAAK,CAAEC,KAAK,CAAEC,MAAM,KAAQ,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7F,KAAM,CAAAC,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,2BAA2B,CAE5E,cAAe,SAAS,CAAAC,SAASA,CAAA,CAAE,CACjC,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACqB,KAAK,CAAEC,QAAQ,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACuB,OAAO,CAAEC,UAAU,CAAC,CAAGxB,QAAQ,CAAC,IAAI,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACd0B,OAAO,CAACC,GAAG,CAAC,CACVC,KAAK,IAAAC,MAAA,CAAId,OAAO,cAAY,CAAC,CAACe,IAAI,CAACC,CAAC,EAAEA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,IAAI,EAAE,CAAC,CAC7DL,KAAK,IAAAC,MAAA,CAAId,OAAO,WAAS,CAAC,CAACe,IAAI,CAACC,CAAC,EAAEA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,IAAI,EAAE,CAAC,CAC3D,CAAC,CAACH,IAAI,CAACI,IAAA,EAAgB,IAAf,CAACC,KAAK,CAAEC,GAAG,CAAC,CAAAF,IAAA,CACnBb,WAAW,CAACc,KAAK,EAAI,EAAE,CAAC,CACxBZ,QAAQ,CAACa,GAAG,EAAI,EAAE,CAAC,CACnBX,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,GAAGD,OAAO,CAAE,mBAAOZ,IAAA,MAAAyB,QAAA,CAAG,iBAAe,CAAG,CAAC,CAEzC;AACA,KAAM,CAAAC,cAAc,CAAGlB,QAAQ,CAACmB,GAAG,CAACC,CAAC,GAAK,CAAEC,IAAI,CAAED,CAAC,CAACC,IAAI,CAAEC,KAAK,CAAEF,CAAC,CAACG,UAAW,CAAC,CAAC,CAAC,CACjF,KAAM,CAAAC,SAAS,CAAGxB,QAAQ,CAACmB,GAAG,CAACC,CAAC,GAAK,CAAEC,IAAI,CAAED,CAAC,CAACC,IAAI,CAAEI,KAAK,CAAEL,CAAC,CAACK,KAAM,CAAC,CAAC,CAAC,CACvE,KAAM,CAAAC,SAAS,CAAGxB,KAAK,CAACiB,GAAG,CAACC,CAAC,GAAK,CAAEC,IAAI,CAAED,CAAC,CAACC,IAAI,CAAEM,KAAK,CAAEP,CAAC,CAACQ,cAAe,CAAC,CAAC,CAAC,CAE7E,KAAM,CAAAC,MAAM,CAAG,CAAC,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAC,CAEtE,mBACEnC,KAAA,QAAAuB,QAAA,eACEzB,IAAA,OAAAyB,QAAA,CAAI,0BAAwB,CAAI,CAAC,CAChCC,cAAc,CAACY,MAAM,cACpBpC,KAAA,CAACZ,QAAQ,EAACiD,KAAK,CAAE,GAAI,CAACC,MAAM,CAAE,GAAI,CAAAf,QAAA,eAChCzB,IAAA,CAACT,GAAG,EAACkD,IAAI,CAAEf,cAAe,CAACgB,OAAO,CAAC,OAAO,CAACC,OAAO,CAAC,MAAM,CAACC,EAAE,CAAC,KAAK,CAACC,EAAE,CAAC,KAAK,CAACC,WAAW,CAAE,GAAI,CAACC,KAAK,MAAAtB,QAAA,CAChGC,cAAc,CAACC,GAAG,CAAC,CAACqB,KAAK,CAAEC,KAAK,gBAAKjD,IAAA,CAACR,IAAI,EAAoB0D,IAAI,CAAEb,MAAM,CAACY,KAAK,CAAGZ,MAAM,CAACC,MAAM,CAAE,OAAArB,MAAA,CAA7CgC,KAAK,CAA0C,CAAC,CAAC,CACpG,CAAC,cACNjD,IAAA,CAACP,OAAO,GAAE,CAAC,EACH,CAAC,cACTO,IAAA,MAAAyB,QAAA,CAAG,4BAA0B,CAAG,CAAC,cAErCzB,IAAA,OAAAyB,QAAA,CAAI,aAAW,CAAI,CAAC,CACnBO,SAAS,CAACM,MAAM,cACfpC,KAAA,CAACR,QAAQ,EAAC6C,KAAK,CAAE,GAAI,CAACC,MAAM,CAAE,GAAI,CAACC,IAAI,CAAET,SAAU,CAAAP,QAAA,eACjDzB,IAAA,CAACJ,KAAK,EAAC8C,OAAO,CAAC,MAAM,CAAE,CAAC,cACxB1C,IAAA,CAACH,KAAK,GAAE,CAAC,cACTG,IAAA,CAACP,OAAO,GAAE,CAAC,cACXO,IAAA,CAACF,MAAM,GAAE,CAAC,cACVE,IAAA,CAACL,GAAG,EAAC+C,OAAO,CAAC,OAAO,CAAE,CAAC,EACf,CAAC,cACT1C,IAAA,MAAAyB,QAAA,CAAG,eAAa,CAAG,CAAC,cAExBzB,IAAA,OAAAyB,QAAA,CAAI,gBAAc,CAAI,CAAC,CACtBS,SAAS,CAACI,MAAM,cACfpC,KAAA,CAACR,QAAQ,EAAC6C,KAAK,CAAE,GAAI,CAACC,MAAM,CAAE,GAAI,CAACC,IAAI,CAAEP,SAAU,CAAAT,QAAA,eACjDzB,IAAA,CAACJ,KAAK,EAAC8C,OAAO,CAAC,MAAM,CAAE,CAAC,cACxB1C,IAAA,CAACH,KAAK,GAAE,CAAC,cACTG,IAAA,CAACP,OAAO,GAAE,CAAC,cACXO,IAAA,CAACF,MAAM,GAAE,CAAC,cACVE,IAAA,CAACL,GAAG,EAAC+C,OAAO,CAAC,OAAO,CAAE,CAAC,EACf,CAAC,cACT1C,IAAA,MAAAyB,QAAA,CAAG,eAAa,CAAG,CAAC,EACrB,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}